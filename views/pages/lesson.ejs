<section style="padding-top:30px">

	<div class="">
		<div class="row">
			<div class="col-lg-9">
				<div class="video-header">
					<h1><%= content.title %></h1>
					<div class="breadcrumb" style="padding: 15px 30px">
						<nav style="--bs-breadcrumb-divider: url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;8&#39; height=&#39;8&#39;%3E%3Cpath d=&#39;M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z&#39; fill=&#39;currentColor&#39;/%3E%3C/svg%3E&quot;);"
							aria-label="breadcrumb">
							<ol class="breadcrumb">
								<li class="breadcrumb-item"><a href="/">Home</a></li>
								<li class="breadcrumb-item" aria-current="page"><a href="/courses">Course Overview</a>
								</li>
								<li class="breadcrumb-item active" aria-current="page"><%= content.title %>
								</li>
							</ol>
						</nav>
					</div>
				</div>
			</div>
			<div class="col-lg-3">

				<div class="my-btn-group d-flex align-items-center mt-2 gap-3 mb-4 mb-lg-0">
					<button @click="saveLesson" type="button" class="btn btn-icon btn-block btn-secondary text-danger" 
						v-bind:class="{ text-danger: lesson.saved }"
						class="btn btn-icon btn-block btn-secondary">
						<i class="m-0 fas fa-bookmark"></i> <strong>Saved</strong>
					</button>
					<button @click="studyCompleted" type="button"
						v-bind:class="{ text-danger: (lesson.studied > 0 ? false : true) }" 
						class="btn btn-icon btn-block btn-secondary" >
						<i class="m-0 far fa-check-circle"></i> <strong>Completed</strong>
					</button>
				</div>
			</div>


		</div>
		<div class="row">


			<div class="col-lg-<%= (course.length > 0 ? '9' : '8 m-auto') %>" >
			<%
				let imageUrl = ""
				if (content.image.includes("https")) {
					imageUrl = content.image
				} else {
					imageUrl = "https://s3contents.chinesepod.com/"+ content.v3_id + "/" + content.hash_code +"/"+ content.image
				}

			%>

				<div class="tab-content">
					<% if(content.video){ %>
					<div class="tab-pane fade <%= content.video ? 'show active' : '' %>" id="nav-video" role="tabpanel"
						aria-labelledby="nav-video-tab">
						<div class="video-main">

							<video id="videoplyr-s3" class="img-fluid" playsinline crossorigin data-poster="<%= imageUrl %>"></video>

						</div>
					</div>

					<% } %>

					<% if(content.mp3_private){ %>
					<div class="tab-pane fade <%= !content.video ? 'show active' : '' %>" id="nav-audio" role="tabpanel"
						aria-labelledby="nav-audio-tab">
						<div class="video-main">

							<div class="card mb-0">


								<img alt="<%= content.title %>" class="card-img" src="<%= imageUrl %>" lazy="loaded">
								<div id="lessonOverlay" class="card-img-overlay d-flex align-items-center ">
									<div class="mx-auto">
										<div class="audio-player-controls">
											<div class="col-12">
												<div class="row">
													<div class="col-4">
														<!-- <button type="button" class="btn bg-transparent border-0 shadow-none p-0 m-0 btn-default">
															<i class="fi flaticon-040-backward text-white jump emphasize-dark"></i>
														</button> -->
													</div>
													<div class="col-4">
														<button type="button"
															class="btn bg-transparent border-0 shadow-none p-0 m-0 btn-default play-audio">
															<i class="play-btn bi bi-play-fill"></i>
															<audio id="">
																<%
																let audioURL = ""
																if (content.mp3_private.includes("https")) {
																	audioURL = content.mp3_private
																} else {
																	audioURL = "https://s3contents.chinesepod.com/"+ content.v3_id + "/" + content.hash_code +"/"+ content.mp3_private
																}
						
																%>
																<source src="<%= audioURL %>" type="audio/mp3">
																Your browser does not support the audio element.
															</audio>
														</button>

													</div>
													<div class="col-4">
														<!-- <button type="button" class="btn bg-transparent border-0 shadow-none p-0 m-0 btn-default">
															<i class="fi flaticon-032-forwards text-white jump emphasize-dark"></i>
														</button> -->
													</div>
												</div>
											</div>
										</div>
									</div>


								</div>



							</div>

						</div>
					</div>
					<% } %>

				</div>

				<div class="nav my-btn-group mt-3 mb-5 lessons-btn" id="myTab" role="tablist">
					<% if(content.video){ %>
					<button data-bs-toggle="tab" data-bs-target="#nav-video" type="button" role="tab"
						aria-controls="nav-video" aria-selected="true" type="button"
						class="btn active">
						<strong>Video Lesson</strong>
					</button>
					<% } %>

					<% if(content.mp3_private) { %>
					<button data-bs-toggle="tab" data-bs-target="#nav-audio" type="button" role="tab"
						aria-controls="nav-audio" aria-selected="false" type="button"
						class="btn ">
						<strong>Audio Lesson</strong>
					</button>
					<% } %>

					<!-- <button type="button" class="btn btn-block ">
						<strong>Review</strong>
					</button> -->
				</div>

				<div class="in-this-lesson">
					<p v-if="lesson"> {{ lesson.introduction.trim() }} </p>
				</div>
			</div>

			<div v-if="course.length > 0" class="col-lg-3 mb-4 mb-md-0">
				<h4 class="mb-3">Next in course:</h4>
				<div v-for="c in course" class="row">
					<div class="col-12 col-md-6 col-lg-12">
						<div class="card mb-3">
							<a :href="'/new/lesson/'+c.slug">

								<img :src="c.image && !c.image.includes('https') ? ('https://s3contents.chinesepod.com/' + c.id + '/' + c.hash_code + '/' + c.image) : c.image"
									class="card-img-top" alt="">
								<div class="card-body">
									<h6 class="card-title fw-bold">{{ c.title }}</h6>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
</section>


<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">

			<div class="modal-body">
				<h4>Are you sure?</h4>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-danger" data-bs-dismiss="modal"
					@click="deleteCommentId()">Delete</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="createNewDeck" tabindex="-1" role="dialog" aria-labelledby="createNewDeckLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">

			<div class="modal-body">
				<h4>Are you sure?</h4>
				<div class="form-group">
					<input type="text" class="form-control" v-model="newDeckCategory" :value="lesson.title">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal"
					@click="addDeckCategory()">Add</button>
			</div>
		</div>
	</div>
</div>

<div style="position: fixed;z-index: 100; top:10px; left: 0;width:100%" id="messageContainer">

</div>