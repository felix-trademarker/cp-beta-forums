<script src="/beta/javascripts/moment.js"></script>
<script src="/beta/javascripts/vue-2.js"></script>

<script>

    var userSearchLogs = new Vue({
        
        el: "#userSearchLogs",
        data: {
            vuex: JSON.parse(window.localStorage.getItem('vuex')),
            userId: "",
            userData: {},
            fetchLoader: false

        },
        methods: {

            getAPIFetch: async function(api) {

                let results = await fetch(api,{
                    credentials: 'same-origin',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer '+ (this.vuex ? this.vuex.token : '')
                    },
                })
                .then(resp => resp.json())
                .then(res => {
                    this.fetchLoader = false;
                    return res;
                })

                return results;

            },

            postAPIFetch: async function(api, params) {

                let options = {
                    credentials: 'same-origin',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer '+ (this.vuex ? this.vuex.token : '')
                    },
                    method: "POST",
                    body: JSON.stringify(params)
                }

                let results = await fetch(api,options)

                    .then(res => {
                        return res.statusText;
                    })

            },

            searchUser: async function() {
                this.fetchLoader = true;
                this.userData = await this.getAPIFetch('/new/api/v1/user/log/'+this.userId)
                console.log(this.userData)
                // if (this.userData) {
                // }
            },

            formatDate : function(date) {
                return moment(date).format('MMMM Do YYYY, h:mm:ss')
            }

        },
        computed: {
            test: async function(){

                let params = {
                    userId: 1,
                    emailId: 'testt test',
                    emailSendId: 'testt test'
                }
                this.lessons = await this.postAPIFetch('/new/api/v1/email/log/', params);
                
            }

            

        }

    });

    userSearchLogs.test


</script>