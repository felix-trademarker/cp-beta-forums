<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>

<script>
    var lessonDashboardApp = new Vue({
        el: "#lessonDashboardApp",
        data: {
            vuex: JSON.parse(window.localStorage.getItem('vuex')),
            lesson: {},
            dialogue: {},
        },
        methods: {

            getAPIFetch: async function(api) {
                let this_ = this
                let result = await fetch(api,{
                    credentials: 'same-origin',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer '+ this.vuex.token
                    },
                })
                .then(resp => resp.json())
                .then(res => {
                    return res;
                })

                console.log(result);
            },

        },
        
        computed: {

            

            
        }

    })

    lessonDashboardApp.lesson = await lessonDashboardApp.getAPIFetch('api/v1/lessons/get-lesson?slug=<%= slug %>');
    lessonDashboardApp.dialogue = await lessonDashboardApp.getAPIFetch('/api/v1/lessons/get-dialogue?lessonId='+lessonDashboardApp.lesson.id);
    // var vuex = JSON.parse(window.localStorage.getItem('vuex'))
    

</script>