<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>

<script>
    var lessonDashboardApp = new Vue({
        el: "#lessonDashboardApp",
        data: {
            vuex: JSON.parse(window.localStorage.getItem('vuex')),
            lesson: {},
            dialogue: {},
        },
        methods: {

            getAPIFetch: async function(api) {
                console.log(api);
                let results = await fetch(api,{
                    credentials: 'same-origin',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer '+ (this.vuex ? this.vuex.token : '')
                    },
                })
                .then(resp => resp.json())
                .then(res => {
                    // this.lesson = res
                    console.log("this result", res);
                    this.lesson = res
                    return res;
                })

                console.log(results);
                // return result;
            }

        },
        computed: {
            fetchLesson: function(){
                this.files.forEach(previewFile)
            },
        }

    })

    lessonDashboardApp.getAPIFetch('https://www.chinesepod.com/api/v1/lessons/get-lesson?slug=hello-and-goodbye');
    // lessonDashboardApp.dialogue = lessonDashboardApp.getAPIFetch('/api/v1/lessons/get-dialogue?lessonId='+lessonDashboardApp.lesson.id);
    // var vuex = JSON.parse(window.localStorage.getItem('vuex'))
    

</script>